<!doctype html>
<html lang="es" style="height: 100%;">

<body style="padding: 0; margin: 0;height: 100%">
    <img id="iframeid" src="https://raw.githubusercontent.com/GestioTransport/Cameres/master/loading.png" title="Càmera de trànsit">
    <p id="hora"></p>
</body>
<script>
    const queryString = window.location.search;
    const urlParams = new URLSearchParams(queryString);
    const id_cam = urlParams.get('id')
    const font = urlParams.get('font')
    function myFunction() {
        myVar = setInterval(upd, 150000);
    }
    function actualitza(){
        document.getElementById('iframeid').src = 'https://raw.githubusercontent.com/GestioTransport/Cameres/master/loading.png';

        switch(font){
            case "bcn":
                document.getElementById('iframeid').src = 'http://www.bcn.cat/transit/imatges/'+id_cam+'.gif?a=1'; break;
            case "terrassa":
                document.getElementById('iframeid').src = 'http://urgell.terrassa.cat/it_terrassa/'+id_cam+'.jpeg?a=1'; break;
            case "andorra":
                document.getElementById('iframeid').src = 'https://app.mobilitat.ad/gifs/'+id_cam+'.gif'; break;
            default:
                document.getElementById('iframeid').src = 'http://mct.gencat.cat/mct2bo/RenderService?sctidcam='+id_cam+'.gif'; break;

        }
        var currentdate = new Date(); 
        var datetime = "Last Sync: " + currentdate.getDate() + "/"
                + (currentdate.getMonth()+1)  + "/" 
                + currentdate.getFullYear() + " @ "  
                + currentdate.getHours() + ":"  
                + currentdate.getMinutes() + ":" 
                + currentdate.getSeconds();
        document.getElementById("hora").innerHTML=datetime;
    }
    function upd(){
        location.reload(); 
    }
    actualitza();
    myFunction();
    


</script>
</html>
